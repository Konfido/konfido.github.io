<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Symbols  [ single bracket  if [ condition ] shell builtin, test construct, used to &#x3D;&#x3D;evaluate expression&#x3D;&#x3D; 1if [ $a &#x3D;&#x3D; abc ] ; then echo yes ; fi Array[1]&#x3D;element1 Array initializatin [a-z] Range of c">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell Script">
<meta property="og:url" content="https://konfido.github.io/shell-script/index.html">
<meta property="og:site_name" content="Konfido&#39;s Blog">
<meta property="og:description" content="Symbols  [ single bracket  if [ condition ] shell builtin, test construct, used to &#x3D;&#x3D;evaluate expression&#x3D;&#x3D; 1if [ $a &#x3D;&#x3D; abc ] ; then echo yes ; fi Array[1]&#x3D;element1 Array initializatin [a-z] Range of c">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-03-14T10:13:29.000Z">
<meta property="article:modified_time" content="2020-09-02T14:36:09.000Z">
<meta property="article:author" content="Konfido">
<meta property="article:tag" content="Handbook">
<meta property="article:tag" content="dev">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Shell Script</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Konfido's Blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/tags/">Tag</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/Use-Two-Themes-in-Hexo/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/AppleScript/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://konfido.github.io/shell-script/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://konfido.github.io/shell-script/&text=Shell Script"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://konfido.github.io/shell-script/&is_video=false&description=Shell Script"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Shell Script&body=Check out this article: https://konfido.github.io/shell-script/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://konfido.github.io/shell-script/&name=Shell Script&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://konfido.github.io/shell-script/&t=Shell Script"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#symbols"><span class="toc-number">1.</span> <span class="toc-text">Symbols</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E8%AE%A1%E7%AE%97"><span class="toc-number">3.</span> <span class="toc-text">数学计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#expression-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%A7%8D%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">expression 表达式种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">字符串处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">5.1.</span> <span class="toc-text">匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96"><span class="toc-number">5.2.</span> <span class="toc-text">提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2"><span class="toc-number">5.3.</span> <span class="toc-text">替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">6.</span> <span class="toc-text">重定向 输入&#x2F;输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">7.</span> <span class="toc-text">流程控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#function"><span class="toc-number">8.</span> <span class="toc-text">function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%AD%90shell"><span class="toc-number">9.</span> <span class="toc-text">子进程&#x2F;子Shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commands"><span class="toc-number">10.</span> <span class="toc-text">Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#others"><span class="toc-number">11.</span> <span class="toc-text">Others</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="toc-number">12.</span> <span class="toc-text">后台运行</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Shell Script
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Konfido</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-03-14T10:13:29.000Z" itemprop="datePublished">2019-03-14</time>
        
        (Updated: <time datetime="2020-09-02T14:36:09.000Z" itemprop="dateModified">2020-09-02</time>)
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Handbook/" rel="tag">Handbook</a>, <a class="tag-link-link" href="/tags/dev/" rel="tag">dev</a>
    </div>


      
    <span id="/shell-script/" class="leancloud_visitors">
        <span class="meta-seperator">|</span>
        <i class="fa fa-eye"></i>
        <i class="leancloud-visitors-count"></i>
    </span>

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="symbols">Symbols</h2>
<ul>
<li><p><code>[</code> single bracket</p>
<ul>
<li><p><code>if [ condition ]</code> shell builtin, <code>test</code> construct, used to ==evaluate expression==</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == abc ] ; <span class="keyword">then</span> <span class="built_in">echo</span> yes ; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>Array[1]=element1</code> Array initializatin</p></li>
<li><p><code>[a-z]</code> Range of characters within a Regular Expression</p></li>
</ul></li>
<li><p><code>[[</code> double bracket</p>
<ul>
<li>bash builtin, 与<code>[</code>类似，extended <code>test</code> constrcut</li>
</ul></li>
<li><p><code>&#123;&#125;</code> braces</p>
<ul>
<li><p><code>$&#123;variable&#125;</code> unambiguously ==identify variables==</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$VARIBLE1234</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;VARIBLE&#125;</span>1234</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>$&#123;!variable&#125;</code> Indirect variable reference 间接引用</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME=<span class="string">&quot;VARIABLE&quot;</span>; VARIABLE=42; <span class="built_in">echo</span> <span class="variable">$&#123;!NAME&#125;</span></span><br><span class="line"><span class="comment"># 42</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>&#123; command1; command2 &#125;</code> ==command group==</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; date; top -b -n1 | head ; &#125; &gt;logfile</span><br><span class="line"><span class="comment"># `date` and `top` output are concatenated</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>brace expansions, create lists of strings，可以在loop时使用</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> f&#123;oo,ee,a&#125;d	<span class="comment"># food feed fad</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv error.log&#123;,.OLD&#125;	<span class="comment"># 等价于：mv error.log error.log.OLD</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> &#123;000..2&#125;		<span class="comment"># 000 001 002</span></span><br><span class="line"><span class="built_in">echo</span> &#123;00..8..3&#125;		<span class="comment"># 00 03 06</span></span><br><span class="line"><span class="built_in">echo</span> &#123;D..T..4&#125; 		<span class="comment"># D H L P T</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p><code>()</code> parentheses</p>
<ul>
<li><p><code>( commands1; command2 )</code> ==command group== excuted within a ==subshell== (without affecting the current shell's environment)</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">cd</span> /tmp; <span class="built_in">pwd</span>)</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>result=$(COMMAND)</code> Command substitution</p></li>
<li><p><code>Array=(element1 element2)</code> Array initialization</p></li>
</ul></li>
<li><p><code>(())</code> double parentheses</p>
<ul>
<li><code>(( var = 12 ))</code> Integer arithmetic，==整数计算==</li>
<li><code>var=$(( 20 + 5 ))</code> 整数计算与赋值</li>
<li>C-style operation
<ul>
<li><code>((var++))</code> / <code>((var--))</code> / <code>((var0 = var1&lt;12?3:21))</code></li>
</ul></li>
</ul></li>
<li><p><code>#</code>：注释</p></li>
</ul>
<h2 id="变量">变量</h2>
<ul>
<li><p>格式要求</p>
<ul>
<li>定义变量时，变量名不加<code>$</code>符号，使用时加​<code>$</code> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span>=<span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$test</span></span><br></pre></td></tr></table></figure></li>
<li>变量名和等号之间==不能有空格==</li>
<li>传递带空格的参数需要加引号：<code>"$&#123;VARIABLE&#125;"</code></li>
<li>单引号内任何字符不视作变量</li>
<li>将命令结果赋值给变量：反引号 或<code>$()</code>
<ul>
<li><code>x=`commands`</code></li>
<li><code>x=$(commands)</code></li>
</ul></li>
</ul></li>
<li><p>变量的作用域</p>
<ul>
<li>Shell脚本中定义的变量是global的，作用域从被定义的地方开始</li>
<li>Shell==函数==中定义的变量默认是global的，作用域从被调用时定义处开始</li>
<li>Shell函数内显式定义local变量时，作用域在函数内；但是与global变量重名时，会在函数内暂时屏蔽global变量 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">foo</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">local</span> x=100</span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$x</span></span><br><span class="line">&#125;</span><br><span class="line">foo 		<span class="comment"># 100</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$x</span> 	<span class="comment"># show nothing</span></span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>判断变量是否为空</p>
<ul>
<li><code>$&#123;A:+xxx&#125;</code> 变量A已赋值时，其值用xxx (字符串/变量的值) 替换，否则不进行任何替换</li>
<li><code>$&#123;A:-xxx&#125;</code> 变量A==未定义/值为空==时，返回xxx (字符串/变量的值)；否则返回变量A的值</li>
<li><code>$&#123;A:=xxx&#125;</code> 变量A未定义/值为空时，将xxx赋值给A，返回xxx；否则返回变量A的值</li>
</ul></li>
<li><p>特殊变量</p>
<table>
<thead>
<tr class="header">
<th>$0</th>
<th>当前脚本的文件名</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>$n</td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是<code>$1</code>，第二个参数是<code>$2</code>。</td>
</tr>
<tr class="even">
<td>$#</td>
<td>传递给脚本或函数的<strong>参数个数</strong>。</td>
</tr>
<tr class="odd">
<td>$*</td>
<td>传递给脚本或函数的<strong>所有参数</strong>。被双引号包含时，以<code>"$1"，"$2" … "$n"</code>的形式输出所有参数。</td>
</tr>
<tr class="even">
<td>$@</td>
<td>传递给脚本或函数的所有参数。被双引号包含时，以<code>"$1 $2 … $n"</code>的形式输出所有参数整体。</td>
</tr>
<tr class="odd">
<td>$?</td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr class="even">
<td>$$</td>
<td>当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。</td>
</tr>
<tr class="odd">
<td>$!</td>
<td>后台运行的最后一个进程的ID号</td>
</tr>
</tbody>
</table>
<ul>
<li><p><code>[@]</code> 引用数组中的值</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -a testarray=(<span class="string">&#x27;box&#x27;</span> <span class="string">&#x27;cat&#x27;</span> <span class="string">&#x27;dog&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable">$&#123;testarray[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$item</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#box</span></span><br><span class="line"><span class="comment">#cat</span></span><br><span class="line"><span class="comment">#dog</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
</ul>
<h2 id="数学计算">数学计算</h2>
<ul>
<li><p><code>let</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> `sum=3+5`	<span class="comment"># sum &lt;- 8</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>expr</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sum=`expr 3 - 6`    	<span class="comment"># 运算符两边空格</span></span><br><span class="line">sum=`expr \( 3 \* \) `	<span class="comment"># 转译*)(</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>$(())</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum=$((<span class="number">3</span>+<span class="number">5</span>))</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="expression-表达式种类">expression 表达式种类</h2>
<ul>
<li><p>文件表达式</p>
<ul>
<li><code>-d</code> 如果目录存在：<code>if [ -d .. ]</code></li>
<li><code>-f</code> 如果文件存在：<code>if [ -f file ]</code></li>
<li><code>-s</code> 文件存在且非空</li>
<li><code>-r</code> 文件存在且可读</li>
<li><code>-w</code> 文件存在且可写</li>
<li><code>-x</code> 文件存在且可执行</li>
</ul></li>
<li><p>==整数变量==表达式</p>
<ul>
<li><code>-eq</code> 如果等于：<code>if [ int1 -eq int2 ]</code></li>
<li><code>-ne</code> 如果不等于</li>
<li><code>-ge</code> 如果&gt;=</li>
<li><code>-gt</code> 如果&gt;</li>
<li><code>-le</code> 如果&lt;=</li>
<li><code>-lt</code> 如果&lt;</li>
</ul></li>
<li><p>字符串变量表达式</p>
<ul>
<li><code>=</code> 等于
<ul>
<li><code>if [ $a = $b ]</code>，如果string1等于string2</li>
<li>允许使用赋值号做等号，等号两边==必须留空格==</li>
</ul></li>
<li><code>!=</code> 不等于
<ul>
<li><code>if [ $a != $b ]</code> 如果string1不等于string2</li>
</ul></li>
<li><code>-z</code> 为空
<ul>
<li><code>if [ -z $string ]</code> 如果string 为空</li>
</ul></li>
<li><code>-n</code> 非空
<ul>
<li><code>if [ -n $string ]</code> 等价于 <code>if [ $string]</code> 如果string 非空(非0），返回0(true)</li>
</ul></li>
</ul></li>
<li><p>逻辑表达式</p>
<ul>
<li><code>!</code> 逻辑非： <code>if [ ! expr ]</code></li>
<li><code>-a</code> 逻辑与：<code>if [ expr1 -a expr2 ]</code></li>
<li><code>-o</code> 逻辑或：<code>if [ expr1 -o expr2 ]</code></li>
</ul></li>
</ul>
<h2 id="字符串处理">字符串处理</h2>
<ul>
<li>字符串长度/字符数量：<code>$&#123;#A&#125;</code></li>
</ul>
<h3 id="匹配">匹配</h3>
<ul>
<li><p>简单方法，若 <code>$string</code>中含有<code>$foo</code> 则匹配成功：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="variable">$string</span> == *<span class="variable">$foo</span>* ]] &amp;&amp; <span class="built_in">echo</span> match</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="variable">$string</span> =~ <span class="variable">$foo</span> ]] &amp;&amp; <span class="built_in">echo</span> match</span><br></pre></td></tr></table></figure></p></li>
<li><p>非贪婪匹配，匹配符合通配符的==最短结果==</p>
<ul>
<li><code>$&#123;A%B&#125;</code> 从右向左匹配B，删除匹配，保留左边字符</li>
<li><code>$&#123;A#B&#125;</code> 从左向右匹配B，删除匹配，保留右边字符</li>
<li><code>$&#123;A/old/new&#125;</code> 用<code>new</code>替换<code>A</code>中匹配的<code>old</code>字符串</li>
</ul></li>
<li><p>贪婪匹配，匹配==最长结果==</p>
<ul>
<li><code>$&#123;A%%B&#125;</code></li>
<li><code>$&#123;A##B&#125;</code></li>
<li><code>$&#123;A//old/new&#125;</code></li>
</ul></li>
</ul>
<h3 id="提取">提取</h3>
<ul>
<li><p><code>grep</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -o，只输出匹配的字符串; -E，使用扩展正则</span></span><br><span class="line"><span class="built_in">echo</span> aaa888 | grep -Eo <span class="string">&#x27;\d+&#x27;</span>		</span><br><span class="line"><span class="comment"># 888</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>sed</code></p>
<ul>
<li><p>sed没有<code>\d</code> <code>\s</code>等用于匹配的元字符</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> aaa888s | sed -E <span class="string">&#x27;s/.*[a-z]([0-9]+).*/\q/&#x27;</span>	<span class="comment"># -E，使用正则</span></span><br><span class="line"><span class="comment"># 888</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p><code>awk</code> 的 <code>match()</code>函数</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> aaa888 | awk <span class="string">&#x27;match($0,/([0-9]+)/, matches) &#123;print matches[1]&#125;&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>$&#123;A:offset&#125;</code></p>
<ul>
<li>从字符串左边，偏移offset个字符，截取到字符串结束</li>
<li><code>$&#123;A:offset:length&#125;</code> 截取length长度</li>
</ul></li>
<li><p><code>$&#123;A:0-offset&#125;</code></p>
<ul>
<li>从字符串右边，偏移offset个字符，截取到字符串结束</li>
<li><code>$&#123;A:0-offset:length&#125;</code></li>
</ul></li>
<li><p>String to Array</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DATES_STRING=<span class="string">&#x27;Jun01 Jun02 Jun03 Jun04 Jun05&#x27;</span></span><br><span class="line">IFS=<span class="string">&#x27; &#x27;</span> <span class="built_in">read</span> -a DATES_ARRAY &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$DATES_STRING</span>&quot;</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="替换">替换</h3>
<ul>
<li><p>普通字符</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;haha s&quot;</span> | sed <span class="string">&#x27;s/ha/Ha/g&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>替换<code>\n</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$s</span> | tr <span class="string">&#x27;\n&#x27;</span> <span class="string">&#x27;\t&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="重定向-输入输出">重定向 输入/输出</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Commands</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">command &gt; file</td>
<td style="text-align: center;">将输出重定向到 file</td>
</tr>
<tr class="even">
<td style="text-align: center;">command &lt; file</td>
<td style="text-align: center;">将输入重定向到 file</td>
</tr>
<tr class="odd">
<td style="text-align: center;">command &gt;&gt; file</td>
<td style="text-align: center;">将输出以追加的方式重定向到 file</td>
</tr>
<tr class="even">
<td style="text-align: center;">n &gt; file</td>
<td style="text-align: center;">将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr class="odd">
<td style="text-align: center;">n &gt;&gt; file</td>
<td style="text-align: center;">将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr class="even">
<td style="text-align: center;">n &gt;&amp; m</td>
<td style="text-align: center;">将输出文件 m 和 n 合并。</td>
</tr>
<tr class="odd">
<td style="text-align: center;">n &lt;&amp; m</td>
<td style="text-align: center;">将输入文件 m 和 n 合并。</td>
</tr>
<tr class="even">
<td style="text-align: center;">&lt;&lt; tag</td>
<td style="text-align: center;">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<ul>
<li>默认打开的文件描述符：0（标准输入），1（标准输出），2（标准错误）</li>
<li><code>1&gt;</code>：可简写为<code>&gt;</code>，标准输出重定向</li>
<li><code>2&gt;&amp;1</code>：标准错误重定向到标准输出。例：<code>echo hello 1&gt;file.out 2&gt;&amp;1</code>，输出与错误都定向到file.out</li>
<li><code>1&gt;&amp;2</code>：标准输出重定向到标准错误</li>
<li><code>&amp;&gt;file</code>：标准输出与标准错误都从定向到file</li>
</ul>
<h2 id="流程控制">流程控制</h2>
<ul>
<li><p><code>case</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="variable">$a</span> <span class="keyword">in</span></span><br><span class="line">    10) <span class="built_in">echo</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">    reload) <span class="built_in">echo</span> <span class="string">&quot;12&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">    *) <span class="built_in">echo</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p></li>
<li><p><code>if/else</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;=&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;&gt;&quot;</span>	</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;&lt;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p><code>if</code>语句简写</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果左边表达式为真，则执行右边的语句</span></span><br><span class="line">[ -f <span class="string">&quot;./foo&quot;</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="comment"># 如果左边表达式为假，则执行右边</span></span><br><span class="line">[ -f <span class="string">&quot;./foo&quot;</span>] || <span class="built_in">exit</span> 0 <span class="comment"># 文件不存在就退出</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>可用来handle exception</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run fallback_command if a_command fails (returns a non-zero value)</span></span><br><span class="line">a_command || fallback_command</span><br><span class="line"><span class="comment"># execute second_command if a_command is successful (returns 0)</span></span><br><span class="line">a_command &amp;&amp; second_command</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p><code>for/do</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> 1 2 3 4 5</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$var</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>while/do</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ <span class="variable">$int</span> -lt 8 ]</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$int</span> <span class="keyword">in</span></span><br><span class="line">        1|4) <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$int</span>&quot;</span></span><br><span class="line">            ;;</span><br><span class="line">        0|2|5|) <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$int</span>&quot;</span></span><br><span class="line">            <span class="built_in">continue</span></span><br><span class="line">            ;;</span><br><span class="line">        *) <span class="built_in">echo</span> <span class="string">&quot;others&quot;</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="function">function</h2>
<ul>
<li><p>函数名前的"function"可以省略</p></li>
<li><p>使用 <code>$?</code> 获取函数返回值，且调用函数后需立即获取，否则返回值丢失</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">foo</span></span>()&#123;</span><br><span class="line">    COMMANDS</span><br><span class="line">    <span class="built_in">return</span> xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">foo</span></span>()&#123;</span><br><span class="line">    COMMANDS</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$1</span>		<span class="comment"># 引用参数</span></span><br><span class="line">    <span class="built_in">return</span> xxx	<span class="comment"># 返回值</span></span><br><span class="line">&#125;</span><br><span class="line">foo 13			<span class="comment"># 传递参数</span></span><br><span class="line">ehco $?			<span class="comment"># 获取函数返回值</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="子进程子shell">子进程/子Shell</h2>
<ul>
<li><p>子Shelll</p>
<ul>
<li><p>只使用 fork() 函数，父进程中的函数、变量(全局变量、局部变量)、文件描述符、别名等在子Shell中仍然有效；子Shell对参数的修改无法传回父Shell。</p></li>
<li><p>组命令，管道，命令替换会产生子Shell</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$SHLVL</span>  <span class="variable">$BASH_SUBSHELL</span>&quot;</span>)			<span class="comment"># 在子Shell执行的组命令</span></span><br><span class="line">&#123; command1; command2; command3; &#125;		<span class="comment"># 在当前Shell执行的组命令</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> | &#123; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$SHLVL</span>  <span class="variable">$BASH_SUBSHELL</span>&quot;</span>; &#125;	<span class="comment"># 管道</span></span><br><span class="line"></span><br><span class="line">var=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$SHLVL</span>  <span class="variable">$BASH_SUBSHELL</span>&quot;</span>)	<span class="comment"># 命令替换</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p>子进程</p>
<ul>
<li><p>使用 fork() 和 exec() 函数，即通过 fork() 创建子进程后立即调用 exec() 函数加载新的可执行文件，不使用父进程的参数。</p></li>
<li><p>下列几种方式会创建子进程，运行结束后立即退出子进程</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a_script.sh</span></span><br><span class="line">bash ./test.sh</span><br><span class="line">./test.sh</span><br><span class="line">chmod +x ./test.sh</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p><code>&amp;</code> 启动并行进程，加速命令执行</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PIDARRAY=()</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> f1 f2</span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$file</span> &amp;		<span class="comment"># 命令符&amp;, 将命令置于后台并继续执行脚本</span></span><br><span class="line">    PIDARRAY+=(<span class="string">&quot;$!&quot;</span>)	<span class="comment"># $! 保存着最近一个后台进程的PID</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span> <span class="variable">$&#123;PIDARRAY[@]&#125;</span>		<span class="comment"># wait 命令等待这些进程结束</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="commands">Commands</h2>
<ul>
<li><p><code>printf</code></p>
<ul>
<li><p>格式化输出</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">printf</span> <span class="string">&quot;ID: %-5s NAME: %-10s Avage: %4.2f\n&quot;</span> 1 tom 74.233;</span></span><br><span class="line">ID: 1     NAME: tom        Avage: 74.23</span><br></pre></td></tr></table></figure></p></li>
<li><p>输出重复字符串</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span> <span class="string">&#x27;hello %.0s&#x27;</span> &#123;1..6&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>--</code> means whatever follows should <strong>not</strong> be interpreted as a command line <em>option</em> to <code>printf</code></p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span> -- <span class="string">&#x27;--- hello ---&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p><code>xargs</code>: 传递参数的过滤器</p>
<ul>
<li><p>列出当前文件夹下每个pdf文件的大小</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls *.pdf | xargs -n1 -I&#123;&#125; du -h &#123;&#125; </span><br><span class="line"><span class="comment"># -n1：每行输出一个</span></span><br><span class="line"><span class="comment"># -I&#123;&#125;：substitute occurrences of &#123;&#125; in command with the parsed argument</span></span><br></pre></td></tr></table></figure></p></li>
</ul></li>
</ul>
<h2 id="others">Others</h2>
<ul>
<li>Shell <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008080537">语法</a>, #TODO</li>
</ul>
<h2 id="后台运行"><a href="./shell脚本后台运行">后台运行</a></h2>

  </div>
</article>

  <div class="reward-container">
  <div>Consider buying me a drink if you like this post.</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
    
      
      
        
      
    <div style="display: inline-block;">
      <img src="/images/wechatpay.png">
      <p>WeChat Pay</p>
    </div>
    
      
      
        
      
    <div style="display: inline-block;">
      <img src="/images/alipay.png">
      <p>Alipay</p>
    </div>
    
      
      
        
      
    <div style="display: inline-block;">
      <img src="/images/paypal.png">
      <p>PayPal</p>
    </div>
    
      
      
        
      
    <div style="display: inline-block;">
      <img src="/images/coffee.png">
      <p>Buy Me a Coffee</p>
    </div>
    
  </div>
</div>



    
        <div class="blog-post-comments">
            <div id="vcomments"></div>
        </div>
    



<script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>
<script>
    new Waline({
        el: '#vcomments',
        serverURL: 'https://waline-comments.vercel.app/',
        placeholder: 'Support for anonymous comments.',
        wordLimit: '350',
        avatar: 'mp',
        pageSize: '10',
        lang: 'en',
        visitor: 'true',
        dark: 'auto',
        requiredMeta: 'name'
        });
</script>
        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/tags/">Tag</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#symbols"><span class="toc-number">1.</span> <span class="toc-text">Symbols</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E8%AE%A1%E7%AE%97"><span class="toc-number">3.</span> <span class="toc-text">数学计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#expression-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%A7%8D%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">expression 表达式种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">字符串处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">5.1.</span> <span class="toc-text">匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96"><span class="toc-number">5.2.</span> <span class="toc-text">提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2"><span class="toc-number">5.3.</span> <span class="toc-text">替换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">6.</span> <span class="toc-text">重定向 输入&#x2F;输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">7.</span> <span class="toc-text">流程控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#function"><span class="toc-number">8.</span> <span class="toc-text">function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%AD%90shell"><span class="toc-number">9.</span> <span class="toc-text">子进程&#x2F;子Shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commands"><span class="toc-number">10.</span> <span class="toc-text">Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#others"><span class="toc-number">11.</span> <span class="toc-text">Others</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="toc-number">12.</span> <span class="toc-text">后台运行</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://konfido.github.io/shell-script/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://konfido.github.io/shell-script/&text=Shell Script"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://konfido.github.io/shell-script/&is_video=false&description=Shell Script"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Shell Script&body=Check out this article: https://konfido.github.io/shell-script/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://konfido.github.io/shell-script/&title=Shell Script"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://konfido.github.io/shell-script/&name=Shell Script&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://konfido.github.io/shell-script/&t=Shell Script"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2017-2021
    Konfido
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/tags/">Tag</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120506290-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-120506290-1');
    </script>

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?402f987e4873e1ee456b67464a20826f";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
